{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/blue_/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/GitHub/soso-web/main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/blue_/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/GitHub/soso-web/main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{useSelector,useDispatch}from'react-redux';import'./Restart.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Restart(){var dispatch=useDispatch();var isNamePage=useSelector(function(state){return state.isNamePage;});var isPlanetClosed=useSelector(function(state){return state.isPlanetClosed;});var userData=useSelector(function(state){return state.userData;});var userID=useSelector(function(state){return state.userID;});// (팝업) 행성 만료\nfunction PlanetClosedConfirm(){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:isPlanetClosed?\"isPlanetClosedConfirm\":\"isPlanetClosedConfirm_fade\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"isPlanetClosedConfirm_outContainer\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"isPlanetClosedConfirm_title\",children:[userData.nickname,\" \\uD589\\uC131\\uC744\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"isPlanetClosedConfirm_title\",children:\"\\uB9CC\\uB8CC\\uC2DC\\uD0A4\\uACA0\\uC2B5\\uB2C8\\uAE4C?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"isPlanetClosedConfirm_p\",children:\"\\uD589\\uC131\\uC774 \\uB9CC\\uB8CC\\uB418\\uBA74\"}),/*#__PURE__*/_jsx(\"p\",{className:\"isPlanetClosedConfirm_p\",children:\"\\uBC1B\\uC558\\uB358 \\uD3B8\\uC9C0\\uB3C4 \\uBAA8\\uB450 \\uC0AD\\uC81C\\uB418\\uC694.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"isPlanetClosedConfirm_innerBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"isPlanetClosedConfirm_button_signOut\",onClick:function onClick(){dispatch({type:'CHANGE_ISPLANETCLOSED',data:!isPlanetClosed});},children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"isPlanetClosedConfirm_button_cancel\",onClick:function onClick(){ResetUserOpenDate();},children:\"\\uB9CC\\uB8CC\\uD558\\uAE30\"})]})]})})});};// 행성 만료 기능\nfunction ResetUserOpenDate(){return _ResetUserOpenDate.apply(this,arguments);}function _ResetUserOpenDate(){_ResetUserOpenDate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(process.env.REACT_APP_RESET_OPENDATE),{method:'PATCH',mode:'cors',cache:'no-cache',credentials:'same-origin',headers:{'Content-Type':'application/json'},body:JSON.stringify(String(userID))}).then(function(res){if(!res.ok){throw new Error();};dispatch({type:'CHANGE_ISPLANETCLOSED',data:!isPlanetClosed});dispatch({type:'CHANGE_ISNAMEPAGE',data:!isNamePage});dispatch({type:'CHANGE_ISRESTART',data:false});dispatch({type:'CHANGE_LETTERDATA',data:[]});dispatch({type:'CHANGE_OPENDATE',data:Number(875286000000)});}).catch(function(error){alert('서버가 불안정 하여 행성 만료에 실패했습니다. 다시 시도해주세요.');});case 2:case\"end\":return _context.stop();}}},_callee);}));return _ResetUserOpenDate.apply(this,arguments);};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"restart_btn\",onClick:function onClick(){dispatch({type:'CHANGE_ISPLANETCLOSED',data:!isPlanetClosed});},children:\"\\uC0C8 \\uD589\\uC131 \\uAC1C\\uC124\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(PlanetClosedConfirm,{})]});};export default Restart;","map":{"version":3,"names":["React","useSelector","useDispatch","Restart","dispatch","isNamePage","state","isPlanetClosed","userData","userID","PlanetClosedConfirm","nickname","type","data","ResetUserOpenDate","fetch","process","env","REACT_APP_RESET_OPENDATE","method","mode","cache","credentials","headers","body","JSON","stringify","String","then","res","ok","Error","Number","catch","error","alert"],"sources":["C:/Users/blue_/OneDrive/바탕 화면/GitHub/soso-web/main/src/components/Restart.js"],"sourcesContent":["import React from \"react\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport './Restart.css';\r\n\r\nfunction Restart() {\r\n    const dispatch = useDispatch();\r\n    const isNamePage = useSelector((state) => state.isNamePage);\r\n    const isPlanetClosed = useSelector((state) => state.isPlanetClosed);\r\n    const userData = useSelector((state) => state.userData);\r\n    const userID = useSelector((state) => state.userID);\r\n\r\n    // (팝업) 행성 만료\r\n    function PlanetClosedConfirm() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className={isPlanetClosed ? \"isPlanetClosedConfirm\" : \"isPlanetClosedConfirm_fade\"}>\r\n                    <div className='isPlanetClosedConfirm_outContainer'>\r\n                        <p className='isPlanetClosedConfirm_title'>{userData.nickname} 행성을</p>\r\n                        <p className='isPlanetClosedConfirm_title'>만료시키겠습니까?</p>\r\n                        <p className='isPlanetClosedConfirm_p'>행성이 만료되면</p>\r\n                        <p className='isPlanetClosedConfirm_p'>받았던 편지도 모두 삭제되요.</p>\r\n                        <div className='isPlanetClosedConfirm_innerBox'>\r\n                            <div className='isPlanetClosedConfirm_button_signOut' onClick={() => {\r\n                                dispatch({ type: 'CHANGE_ISPLANETCLOSED', data: !isPlanetClosed });\r\n                            }}>취소</div>\r\n                            <div className='isPlanetClosedConfirm_button_cancel' onClick={() => {\r\n                                ResetUserOpenDate();\r\n                            }}>만료하기</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    };\r\n\r\n    // 행성 만료 기능\r\n    async function ResetUserOpenDate() {\r\n        await fetch(`${process.env.REACT_APP_RESET_OPENDATE}`, {\r\n            method: 'PATCH',\r\n            mode: 'cors',\r\n            cache: 'no-cache',\r\n            credentials: 'same-origin',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(String(userID))\r\n        })\r\n            .then((res) => {\r\n                if (!res.ok) {\r\n                    throw new Error();\r\n                };\r\n                dispatch({ type: 'CHANGE_ISPLANETCLOSED', data: !isPlanetClosed });\r\n                dispatch({ type: 'CHANGE_ISNAMEPAGE', data: !isNamePage });\r\n                dispatch({ type: 'CHANGE_ISRESTART', data: false });\r\n                dispatch({ type: 'CHANGE_LETTERDATA', data: [] });\r\n                dispatch({ type: 'CHANGE_OPENDATE', data: Number(875286000000) });\r\n            })\r\n            .catch((error) => {\r\n                alert('서버가 불안정 하여 행성 만료에 실패했습니다. 다시 시도해주세요.');\r\n            })\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"restart_btn\" onClick={() => {\r\n                dispatch({ type: 'CHANGE_ISPLANETCLOSED', data: !isPlanetClosed });\r\n            }}>새 행성 개설하기</div>\r\n            <PlanetClosedConfirm></PlanetClosedConfirm>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default Restart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}