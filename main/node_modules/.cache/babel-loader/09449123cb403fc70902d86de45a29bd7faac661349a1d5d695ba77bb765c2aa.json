{"ast":null,"code":"import _slicedToArray from\"C:/Users/blue_/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/GitHub/soso-web/main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import{useNavigate}from\"react-router-dom\";import'./Main.css';import ModalStory from'./ModalStory';import Menu from'./Menu';import InnerPage from'./InnerPage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Main(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),render1=_useState2[0],setRender1=_useState2[1];var navigater=useNavigate();var dispatch=useDispatch();var isStory=useSelector(function(state){return state.isStory;});var userID=useSelector(function(state){return state.userID;});// (랜더링 직후) 사용자 쿠키 확인 기능 + 서버로 log 정보 보내는 기능\nuseEffect(function(){var cookieData=document.cookie.split(';');for(var i=0;i<cookieData.length;i++){if(cookieData[i].indexOf('pl@ter')>-1){dispatch({type:'CHANGE_ISSTORY',data:!isStory});}else break;};fetch(\"\".concat(process.env.REACT_APP_REGISTER_LOG,\"main\"),{method:'GET',mode:'cors',cache:'no-cache',credentials:'same-origin',headers:{'Content-Type':'application/json'}}).then(function(){}).catch(function(error){});if(userID===null){navigater('/web/login');};},[dispatch]);// 편지 읽을 수 있도록 시간 조정 기능\nfunction settingTime(){alert('사용자의 openDate를 11일 전으로 설정했습니다.');var now=new Date();now.setDate(now.getDate()-11);dispatch({type:'CHANGE_OPENDATE',data:Number(now.getTime())});setRender1(render1+1);};return/*#__PURE__*/_jsxs(\"div\",{className:\"main_background\",children:[/*#__PURE__*/_jsx(ModalStory,{}),/*#__PURE__*/_jsx(Menu,{}),/*#__PURE__*/_jsx(InnerPage,{}),/*#__PURE__*/_jsx(\"img\",{onClick:settingTime,style:{width:\"10%\",position:\"absolute\",bottom:\"30%\",left:\"85%\"},alt:\"cookie\",src:\"https://cdn-icons-png.flaticon.com/512/896/896266.png\"})]});};export default Main;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","useNavigate","ModalStory","Menu","InnerPage","Main","render1","setRender1","navigater","dispatch","isStory","state","userID","cookieData","document","cookie","split","i","length","indexOf","type","data","fetch","process","env","REACT_APP_REGISTER_LOG","method","mode","cache","credentials","headers","then","catch","error","settingTime","alert","now","Date","setDate","getDate","Number","getTime","width","position","bottom","left"],"sources":["C:/Users/blue_/OneDrive/바탕 화면/GitHub/soso-web/main/src/components/Main.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport './Main.css';\r\nimport ModalStory from './ModalStory';\r\nimport Menu from './Menu';\r\nimport InnerPage from './InnerPage';\r\n\r\nfunction Main() {\r\n  const [render1, setRender1] = useState(0);\r\n  const navigater = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const isStory = useSelector((state) => state.isStory);\r\n  const userID = useSelector((state) => state.userID);\r\n  // (랜더링 직후) 사용자 쿠키 확인 기능 + 서버로 log 정보 보내는 기능\r\n  useEffect(() => {\r\n    const cookieData = document.cookie.split(';');\r\n    for (let i = 0; i < cookieData.length; i++) {\r\n      if (cookieData[i].indexOf('pl@ter') > -1) {\r\n        dispatch({ type: 'CHANGE_ISSTORY', data: !isStory });\r\n      } else break;\r\n    };\r\n    fetch(`${process.env.REACT_APP_REGISTER_LOG}main`, {\r\n      method: 'GET',\r\n      mode: 'cors',\r\n      cache: 'no-cache',\r\n      credentials: 'same-origin',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n      .then(() => {\r\n      })\r\n      .catch((error) => {\r\n      });\r\n    if (userID === null) {\r\n      navigater('/web/login');\r\n    };\r\n  }, [dispatch]);\r\n\r\n  // 편지 읽을 수 있도록 시간 조정 기능\r\n  function settingTime() {\r\n    alert('사용자의 openDate를 11일 전으로 설정했습니다.');\r\n    const now = new Date();\r\n    now.setDate(now.getDate() - 11);\r\n    dispatch({ type: 'CHANGE_OPENDATE', data: Number(now.getTime()) });\r\n    setRender1(render1 + 1);\r\n  };\r\n\r\n  return (\r\n    <div className='main_background'>\r\n      <ModalStory></ModalStory>\r\n      <Menu></Menu>\r\n      <InnerPage></InnerPage>\r\n      <img onClick={settingTime} style={{ width: \"10%\", position: \"absolute\", bottom: \"30%\", left: \"85%\" }} alt='cookie' src='https://cdn-icons-png.flaticon.com/512/896/896266.png'></img>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;"],"mappings":"4JAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,YAAY,CACnB,MAAOC,WAAU,KAAM,cAAc,CACrC,MAAOC,KAAI,KAAM,QAAQ,CACzB,MAAOC,UAAS,KAAM,aAAa,CAAC,wFAEpC,QAASC,KAAI,EAAG,CACd,cAA8BP,QAAQ,CAAC,CAAC,CAAC,wCAAlCQ,OAAO,eAAEC,UAAU,eAC1B,GAAMC,UAAS,CAAGP,WAAW,EAAE,CAC/B,GAAMQ,SAAQ,CAAGT,WAAW,EAAE,CAC9B,GAAMU,QAAO,CAAGX,WAAW,CAAC,SAACY,KAAK,QAAKA,MAAK,CAACD,OAAO,GAAC,CACrD,GAAME,OAAM,CAAGb,WAAW,CAAC,SAACY,KAAK,QAAKA,MAAK,CAACC,MAAM,GAAC,CACnD;AACAf,SAAS,CAAC,UAAM,CACd,GAAMgB,WAAU,CAAGC,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAC7C,IAAK,GAAIC,EAAC,CAAG,CAAC,CAAEA,CAAC,CAAGJ,UAAU,CAACK,MAAM,CAAED,CAAC,EAAE,CAAE,CAC1C,GAAIJ,UAAU,CAACI,CAAC,CAAC,CAACE,OAAO,CAAC,QAAQ,CAAC,CAAG,CAAC,CAAC,CAAE,CACxCV,QAAQ,CAAC,CAAEW,IAAI,CAAE,gBAAgB,CAAEC,IAAI,CAAE,CAACX,OAAQ,CAAC,CAAC,CACtD,CAAC,IAAM,OACT,CAAC,CACDY,KAAK,WAAIC,OAAO,CAACC,GAAG,CAACC,sBAAsB,SAAQ,CACjDC,MAAM,CAAE,KAAK,CACbC,IAAI,CAAE,MAAM,CACZC,KAAK,CAAE,UAAU,CACjBC,WAAW,CAAE,aAAa,CAC1BC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACCC,IAAI,CAAC,UAAM,CACZ,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,KAAK,CAAK,CAClB,CAAC,CAAC,CACJ,GAAIrB,MAAM,GAAK,IAAI,CAAE,CACnBJ,SAAS,CAAC,YAAY,CAAC,CACzB,CAAC,CACH,CAAC,CAAE,CAACC,QAAQ,CAAC,CAAC,CAEd;AACA,QAASyB,YAAW,EAAG,CACrBC,KAAK,CAAC,gCAAgC,CAAC,CACvC,GAAMC,IAAG,CAAG,GAAIC,KAAI,EAAE,CACtBD,GAAG,CAACE,OAAO,CAACF,GAAG,CAACG,OAAO,EAAE,CAAG,EAAE,CAAC,CAC/B9B,QAAQ,CAAC,CAAEW,IAAI,CAAE,iBAAiB,CAAEC,IAAI,CAAEmB,MAAM,CAACJ,GAAG,CAACK,OAAO,EAAE,CAAE,CAAC,CAAC,CAClElC,UAAU,CAACD,OAAO,CAAG,CAAC,CAAC,CACzB,CAAC,CAED,mBACE,aAAK,SAAS,CAAC,iBAAiB,wBAC9B,KAAC,UAAU,IAAc,cACzB,KAAC,IAAI,IAAQ,cACb,KAAC,SAAS,IAAa,cACvB,YAAK,OAAO,CAAE4B,WAAY,CAAC,KAAK,CAAE,CAAEQ,KAAK,CAAE,KAAK,CAAEC,QAAQ,CAAE,UAAU,CAAEC,MAAM,CAAE,KAAK,CAAEC,IAAI,CAAE,KAAM,CAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,uDAAuD,EAAO,GACjL,CAEV,CAAC,CAED,cAAexC,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}