{"ast":null,"code":"import React,{useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import'./ShareBt.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ShareBt(){var dispatch=useDispatch();var userData=useSelector(function(state){return state.userData;});var isShare=useSelector(function(state){return state.isShare;});var isShareBt=useSelector(function(state){return state.isShareBt;});var userID=useSelector(function(state){return state.userID;});var ShareUserID=useSelector(function(state){return state.ShareUserID;});var isPopUpCopyLink=useSelector(function(state){return state.isPopUpCopyLink;});useEffect(function(){console.log(isShare);if(userData.openDate!==875286000000||userData.openDate!==0){dispatch({type:'CHANGE_ISSHARE',data:!isShare});};},[dispatch,userData.openDate]);var shareBasicURL=\"\".concat(process.env.REACT_APP_BASIC_URL2,\"userID=\").concat(ShareUserID);var basicURL=\"\".concat(process.env.REACT_APP_BASIC_URL);var image_share='https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/logo/logo.png?raw=true';var title='PL@TER - 기다려지는 소식';// 카카오톡 공유 기능\nfunction kakaoShare(){var KakaoJS=process.env.REACT_APP_JAVASCRIPT_KEY;if(!window.Kakao.isInitialized()){window.Kakao.init(KakaoJS);};window.Kakao.Share.sendDefault({objectType:'feed',content:{title:'PL@TER',description:'PL@TER-기다려지는 소식',imageUrl:image_share,link:{mobileWebUrl:shareBasicURL,webUrl:shareBasicURL}},buttons:[{title:'편지 보내기',link:{mobileWebUrl:shareBasicURL,webUrl:shareBasicURL}},{title:'행성 만들기',link:{mobileWebUrl:basicURL,webUrl:basicURL}}],installTalk:true});};// 트위터 공유 기능\nfunction shareTwitter(){var url=encodeURIComponent(shareBasicURL);window.open(\"https://twitter.com/intent/tweet?url=\".concat(url,\"&text=\").concat(title),'소소한 프로젝트','width=400, height=400');};// 페이스북 공유 기능\nfunction shareFacebook(){window.open('https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(shareBasicURL)+'&t='+encodeURIComponent(title),'facebooksharedialog','menubar=no, toolbar=no, resizable=yes, scrollbars=yes, height=400, width=400');};// 공유 가능 사용자 아이디 발급 기능\nfunction RequestShareUserID(userID){fetch(\"\".concat(process.env.REACT_APP_SHARE_USERID).concat(userID),{method:'GET',mode:'cors',cache:'no-cache',credentials:'same-origin',headers:{'Content-Type':'application/json'}}).then(function(res){if(!res.ok){throw new Error();};return res.json();}).then(function(data){dispatch({type:'CHANGE_SHAREUSERID',data:String(data)});}).catch(function(error){alert('공유 가능한 사용자 주소를 정상적으로 받아오지 못했습니다. 공유 버튼을 다시 눌러주세요.');});};// 공유 URL 복사 기능\nfunction urlCopy(){var Dummy_Tag=document.createElement(\"input\");var Current_URL=\"\".concat(process.env.REACT_APP_BASIC_URL2,\"userID=\").concat(ShareUserID);document.body.appendChild(Dummy_Tag);Dummy_Tag.value=Current_URL;Dummy_Tag.select();document.execCommand(\"copy\");document.body.removeChild(Dummy_Tag);dispatch({type:'CHANGE_ISPOPUPCOPYLINK',data:!isPopUpCopyLink});};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:isShare?'shareButton_outContainer_active':'shareButton_outContainer',onClick:function onClick(){RequestShareUserID(userID);dispatch({type:'CHANGE_ISSHAREBT',data:!isShareBt});},children:/*#__PURE__*/_jsx(\"img\",{className:\"shareButton_share\",alt:\"share\",src:\"https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/icon/share.png?raw=true\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareButton_innerContainer\",children:[/*#__PURE__*/_jsx(\"img\",{className:isShareBt?'shareButton_share_btn_url_active':'shareButton_share_btn',alt:\"url\",src:\"https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/icon/copy_link.png?raw=true\",onClick:urlCopy}),/*#__PURE__*/_jsx(\"img\",{className:isShareBt?'shareButton_share_btn_kakao_active':'shareButton_share_btn',alt:\"kakao\",src:\"https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/icon/kakao.png?raw=true\",onClick:kakaoShare}),/*#__PURE__*/_jsx(\"img\",{className:isShareBt?'shareButton_share_btn_facebook_active':'shareButton_share_btn',alt:\"facebook\",src:\"https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/icon/facebook.png?raw=true\",onClick:shareFacebook}),/*#__PURE__*/_jsx(\"img\",{className:isShareBt?'shareButton_share_btn_twitter_active':'shareButton_share_btn',alt:\"twitter\",src:\"https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/icon/twitter.png?raw=true\",onClick:shareTwitter})]})]});};export default ShareBt;","map":{"version":3,"names":["React","useEffect","useSelector","useDispatch","ShareBt","dispatch","userData","state","isShare","isShareBt","userID","ShareUserID","isPopUpCopyLink","console","log","openDate","type","data","shareBasicURL","process","env","REACT_APP_BASIC_URL2","basicURL","REACT_APP_BASIC_URL","image_share","title","kakaoShare","KakaoJS","REACT_APP_JAVASCRIPT_KEY","window","Kakao","isInitialized","init","Share","sendDefault","objectType","content","description","imageUrl","link","mobileWebUrl","webUrl","buttons","installTalk","shareTwitter","url","encodeURIComponent","open","shareFacebook","RequestShareUserID","fetch","REACT_APP_SHARE_USERID","method","mode","cache","credentials","headers","then","res","ok","Error","json","String","catch","error","alert","urlCopy","Dummy_Tag","document","createElement","Current_URL","body","appendChild","value","select","execCommand","removeChild"],"sources":["C:/Users/blue_/OneDrive/바탕 화면/GitHub/soso-web/main/src/components/ShareBt.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport './ShareBt.css';\r\n\r\nfunction ShareBt() {\r\n    const dispatch = useDispatch();\r\n    const userData = useSelector((state) => state.userData);\r\n    const isShare = useSelector((state) => state.isShare);\r\n    const isShareBt = useSelector((state) => state.isShareBt);\r\n    const userID = useSelector((state) => state.userID);\r\n    const ShareUserID = useSelector((state) => state.ShareUserID);\r\n    const isPopUpCopyLink = useSelector((state) => state.isPopUpCopyLink);\r\n\r\n    useEffect(() => {\r\n        console.log(isShare);\r\n        if (userData.openDate !== 875286000000 || userData.openDate !== 0) {\r\n            dispatch({ type: 'CHANGE_ISSHARE', data: !isShare });\r\n        };\r\n    }, [dispatch, userData.openDate]);\r\n\r\n    const shareBasicURL = `${process.env.REACT_APP_BASIC_URL2}userID=${ShareUserID}`;\r\n    const basicURL = `${process.env.REACT_APP_BASIC_URL}`;\r\n    const image_share = 'https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/logo/logo.png?raw=true';\r\n    const title = 'PL@TER - 기다려지는 소식';\r\n\r\n    // 카카오톡 공유 기능\r\n    function kakaoShare() {\r\n        const KakaoJS = process.env.REACT_APP_JAVASCRIPT_KEY\r\n        if (!window.Kakao.isInitialized()) {\r\n            window.Kakao.init(KakaoJS);\r\n        };\r\n        window.Kakao.Share.sendDefault({\r\n            objectType: 'feed',\r\n            content: {\r\n                title: 'PL@TER',\r\n                description: 'PL@TER-기다려지는 소식',\r\n                imageUrl: image_share,\r\n                link: {\r\n                    mobileWebUrl: shareBasicURL,\r\n                    webUrl: shareBasicURL,\r\n                },\r\n            },\r\n            buttons: [\r\n                {\r\n                    title: '편지 보내기',\r\n                    link: {\r\n                        mobileWebUrl: shareBasicURL,\r\n                        webUrl: shareBasicURL,\r\n                    },\r\n                },\r\n                {\r\n                    title: '행성 만들기',\r\n                    link: {\r\n                        mobileWebUrl: basicURL,\r\n                        webUrl: basicURL,\r\n                    },\r\n                },\r\n            ],\r\n            installTalk: true,\r\n        });\r\n    };\r\n\r\n    // 트위터 공유 기능\r\n    function shareTwitter() {\r\n        let url = encodeURIComponent(shareBasicURL);\r\n        window.open(`https://twitter.com/intent/tweet?url=${url}&text=${title}`, '소소한 프로젝트', 'width=400, height=400');\r\n    };\r\n\r\n    // 페이스북 공유 기능\r\n    function shareFacebook() {\r\n        window.open('https://www.facebook.com/sharer/sharer.php?u='\r\n            + encodeURIComponent(shareBasicURL)\r\n            + '&t=' + encodeURIComponent(title),\r\n            'facebooksharedialog',\r\n            'menubar=no, toolbar=no, resizable=yes, scrollbars=yes, height=400, width=400');\r\n    };\r\n\r\n    // 공유 가능 사용자 아이디 발급 기능\r\n    function RequestShareUserID(userID) {\r\n        fetch(`${process.env.REACT_APP_SHARE_USERID}${userID}`, {\r\n            method: 'GET',\r\n            mode: 'cors',\r\n            cache: 'no-cache',\r\n            credentials: 'same-origin',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n            .then(res => {\r\n                if (!res.ok) {\r\n                    throw new Error();\r\n                };\r\n                return res.json();\r\n            })\r\n            .then((data) => {\r\n                dispatch({ type: 'CHANGE_SHAREUSERID', data: String(data) });\r\n            })\r\n            .catch((error) => {\r\n                alert('공유 가능한 사용자 주소를 정상적으로 받아오지 못했습니다. 공유 버튼을 다시 눌러주세요.');\r\n            });\r\n    };\r\n\r\n    // 공유 URL 복사 기능\r\n    function urlCopy() {\r\n        let Dummy_Tag = document.createElement(\"input\");\r\n        let Current_URL = `${process.env.REACT_APP_BASIC_URL2}userID=${ShareUserID}`;\r\n        document.body.appendChild(Dummy_Tag);\r\n        Dummy_Tag.value = Current_URL;\r\n        Dummy_Tag.select();\r\n        document.execCommand(\"copy\");\r\n        document.body.removeChild(Dummy_Tag);\r\n        dispatch({ type: 'CHANGE_ISPOPUPCOPYLINK', data: !isPopUpCopyLink });\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className={isShare ? 'shareButton_outContainer_active' : 'shareButton_outContainer'} onClick={() => {\r\n                RequestShareUserID(userID);\r\n                dispatch({ type: 'CHANGE_ISSHAREBT', data: !isShareBt });\r\n            }}>\r\n                <img className='shareButton_share' alt='share' src='https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/icon/share.png?raw=true'></img>\r\n            </div>\r\n            <div className='shareButton_innerContainer'>\r\n                <img className={isShareBt ? 'shareButton_share_btn_url_active' : 'shareButton_share_btn'} alt='url' src='https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/icon/copy_link.png?raw=true' onClick={urlCopy}></img>\r\n                <img className={isShareBt ? 'shareButton_share_btn_kakao_active' : 'shareButton_share_btn'} alt='kakao' src='https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/icon/kakao.png?raw=true' onClick={kakaoShare}></img>\r\n                <img className={isShareBt ? 'shareButton_share_btn_facebook_active' : 'shareButton_share_btn'} alt='facebook' src='https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/icon/facebook.png?raw=true' onClick={shareFacebook}></img>\r\n                <img className={isShareBt ? 'shareButton_share_btn_twitter_active' : 'shareButton_share_btn'} alt='twitter' src='https://github.com/Lee-Seung-Wook/Angelo-s_Library/blob/main/lib/icon/twitter.png?raw=true' onClick={shareTwitter}></img>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default ShareBt;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}