{"ast":null,"code":"import _slicedToArray from\"C:/Users/blue_/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/GitHub/soso-web/main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import{NavLink,useNavigate}from\"react-router-dom\";import'./Main.css';import ModalStory from'./ModalStory';import Menu from'./Menu';import InnerPage from'./InnerPage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Main(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),render1=_useState2[0],setRender1=_useState2[1];var navigater=useNavigate();var dispatch=useDispatch();var isStory=useSelector(function(state){return state.isStory;});var userID=useSelector(function(state){return state.userID;});// \nvar ShareUserID=useSelector(function(state){return state.ShareUserID;});// \n// (랜더링 직후) 사용자 쿠키 확인 기능 + 서버로 log 정보 보내는 기능\nuseEffect(function(){var cookieData=document.cookie.split(';');for(var i=0;i<cookieData.length;i++){if(cookieData[i].indexOf('pl@ter')>-1){dispatch({type:'CHANGE_ISSTORY',data:!isStory});}else break;};fetch(\"\".concat(process.env.REACT_APP_REGISTER_LOG,\"main\"),{method:'GET',mode:'cors',cache:'no-cache',credentials:'same-origin',headers:{'Content-Type':'application/json'}}).then(function(){}).catch(function(error){});if(userID===null){navigater('/web/login');// navigater('/login');\n};},[dispatch]);// 쿠키 삭제 기능\nfunction delCookie(){alert('사용자의 쿠키 중 pl@ter를 삭제했습니다.');var expires=new Date();expires.setDate(expires.getDate()-1);var expiresDate=expires.toUTCString();var setCookie='';setCookie+='pl@ter=190301;';setCookie+='Expires='+expiresDate;document.cookie=setCookie;};// 편지 읽을 수 있도록 시간 조정 기능\nfunction settingTime(){alert('사용자의 openDate를 11일 전으로 설정했습니다.');var now=new Date();now.setDate(now.getDate()-11);dispatch({type:'CHANGE_OPENDATE',data:Number(now.getTime())});setRender1(render1+1);};return/*#__PURE__*/_jsxs(\"div\",{className:\"main_background\",children:[/*#__PURE__*/_jsx(ModalStory,{}),/*#__PURE__*/_jsx(Menu,{}),/*#__PURE__*/_jsx(InnerPage,{}),/*#__PURE__*/_jsx(NavLink,{end:true,to:\"/web/send?userID=\"+ShareUserID,onClick:function onClick(){},children:/*#__PURE__*/_jsx(\"img\",{style:{width:\"10%\",position:\"absolute\",top:\"50%\",left:\"85%\"},alt:\"login\",src:\"https://cdn-icons-png.flaticon.com/512/9072/9072392.png\"})}),/*#__PURE__*/_jsx(\"img\",{onClick:settingTime,style:{width:\"10%\",position:\"absolute\",top:\"60%\",left:\"85%\"},alt:\"cookie\",src:\"https://cdn-icons-png.flaticon.com/512/896/896266.png\"}),/*#__PURE__*/_jsx(\"img\",{onClick:delCookie,style:{width:\"10%\",position:\"absolute\",top:\"80%\",left:\"85%\"},alt:\"cookie\",src:\"https://cdn-icons-png.flaticon.com/512/1330/1330387.png\"})]});};export default Main;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","NavLink","useNavigate","ModalStory","Menu","InnerPage","Main","render1","setRender1","navigater","dispatch","isStory","state","userID","ShareUserID","cookieData","document","cookie","split","i","length","indexOf","type","data","fetch","process","env","REACT_APP_REGISTER_LOG","method","mode","cache","credentials","headers","then","catch","error","delCookie","alert","expires","Date","setDate","getDate","expiresDate","toUTCString","setCookie","settingTime","now","Number","getTime","width","position","top","left"],"sources":["C:/Users/blue_/OneDrive/바탕 화면/GitHub/soso-web/main/src/components/Main.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { NavLink, useNavigate } from \"react-router-dom\";\r\nimport './Main.css';\r\nimport ModalStory from './ModalStory';\r\nimport Menu from './Menu';\r\nimport InnerPage from './InnerPage';\r\n\r\nfunction Main() {\r\n  const [render1, setRender1] = useState(0);\r\n  const navigater = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const isStory = useSelector((state) => state.isStory);\r\n  const userID = useSelector((state) => state.userID);\r\n  // \r\n  const ShareUserID = useSelector((state) => state.ShareUserID);\r\n  // \r\n  // (랜더링 직후) 사용자 쿠키 확인 기능 + 서버로 log 정보 보내는 기능\r\n  useEffect(() => {\r\n    const cookieData = document.cookie.split(';');\r\n    for (let i = 0; i < cookieData.length; i++) {\r\n      if (cookieData[i].indexOf('pl@ter') > -1) {\r\n        dispatch({ type: 'CHANGE_ISSTORY', data: !isStory });\r\n      } else break;\r\n    };\r\n    fetch(`${process.env.REACT_APP_REGISTER_LOG}main`, {\r\n      method: 'GET',\r\n      mode: 'cors',\r\n      cache: 'no-cache',\r\n      credentials: 'same-origin',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n      .then(() => {\r\n      })\r\n      .catch((error) => {\r\n      });\r\n    if (userID === null) {\r\n      navigater('/web/login');\r\n      // navigater('/login');\r\n    };\r\n  }, [dispatch]);\r\n\r\n  // 쿠키 삭제 기능\r\n  function delCookie() {\r\n    alert('사용자의 쿠키 중 pl@ter를 삭제했습니다.');\r\n    const expires = new Date();\r\n    expires.setDate(expires.getDate() - 1);\r\n    const expiresDate = expires.toUTCString();\r\n    let setCookie = '';\r\n    setCookie += 'pl@ter=190301;';\r\n    setCookie += 'Expires=' + expiresDate;\r\n    document.cookie = setCookie;\r\n  };\r\n\r\n  // 편지 읽을 수 있도록 시간 조정 기능\r\n  function settingTime() {\r\n    alert('사용자의 openDate를 11일 전으로 설정했습니다.');\r\n    const now = new Date();\r\n    now.setDate(now.getDate() - 11);\r\n    dispatch({ type: 'CHANGE_OPENDATE', data: Number(now.getTime()) });\r\n    setRender1(render1 + 1);\r\n  };\r\n\r\n  return (\r\n    <div className='main_background'>\r\n      <ModalStory></ModalStory>\r\n      <Menu></Menu>\r\n      <InnerPage></InnerPage>\r\n      <NavLink end to={\"/web/send?userID=\" + ShareUserID} onClick={() => {\r\n      }}><img style={{ width: \"10%\", position: \"absolute\", top: \"50%\", left: \"85%\" }} alt='login' src='https://cdn-icons-png.flaticon.com/512/9072/9072392.png'></img></NavLink>\r\n      <img onClick={settingTime} style={{ width: \"10%\", position: \"absolute\", top: \"60%\", left: \"85%\" }} alt='cookie' src='https://cdn-icons-png.flaticon.com/512/896/896266.png'></img>\r\n      <img onClick={delCookie} style={{ width: \"10%\", position: \"absolute\", top: \"80%\", left: \"85%\" }} alt='cookie' src='https://cdn-icons-png.flaticon.com/512/1330/1330387.png'></img>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}